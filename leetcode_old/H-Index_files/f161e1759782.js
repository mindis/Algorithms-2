!function(e,n){"use strict";function t(e){return function(){return{restrict:e?"EAC":"E",require:"form",link:{pre:function(e,n,t,r){var i,o=r.$addControl;r.$addControl=function(e){o(e),i=i||[],i.indexOf(e)===-1&&i.push(e)};var a=r.$removeControl;r.$removeControl=function(e){a(e),i&&i.indexOf(e)!==-1&&i.splice(i.indexOf(e),1)},r.djngSetValidFieldsPristine=function(){for(var e,n=0,t=i.length;n<t;n++)e=i[n],e.$valid&&e.$setPristine()}}}}}}function r(e){return{restrict:"A",require:["?^form","?ngModel"],link:function(n,t,r,i){var o=i[0],a=i[1];"bound-msgs-field"===r.djngError&&o&&a&&(t.removeAttr("djng-error"),t.removeAttr("djng-error-msg"),e(function(){a.$message=r.djngErrorMsg,a.$validate(),o.$setSubmitted()}))}}}function i(){return{restrict:"A",require:"?ngModel",link:function(e,t,r,i){if(i&&"validator"===r.djngRejected){var o=!1,a=null;i.$validators.rejected=function(e){return o&&a!==e?(o=!1,a=null,i.$message=n):(o=!!i.$message,o&&(a=e)),!o}}}}}function o(){function t(e,n){return r(e),i(e,n),a(n)}function r(e){e.$message=n}function i(n,t){n.$setSubmitted(),e.forEach(t,function(t,r){var i,a=t[0];r==u?(n.$message=a,n.djngSetValidFieldsPristine()):n.hasOwnProperty(r)&&(i=n[r],i.$message=a,o(i)?i.$validate():(i.$setSubmitted(),e.forEach(i,function(e,n){o(e)&&e.$validate()})))})}function o(n){return!!n&&e.isArray(n.$viewChangeListeners)}function a(e){for(var n in e)if(e.hasOwnProperty(n))return!0;return!1}var u="__all__";return{setErrors:t}}e.version.minor<3,e.module("ng.django.angular.messages",["ng.django.forms"]).directive("form",t()).directive("ngForm",t(!0)).directive("djngError",r).directive("djngRejected",i).factory("djngAngularMessagesForm",o)}(window.angular),function(e,n){"use strict";function t(e){return e.split("").reduce(function(e,n){return e=(e<<5)-e+n.charCodeAt(0),e&e},0)}function r(){return["$compile",function(n){return{restrict:"E",require:"?^form",link:function(r,i,o,a){var u;!a||e.isUndefined(a.$name)||"hidden"===i.prop("type")||e.isUndefined(o.name)||e.isDefined(o.ngModel)||(u="dmy"+Math.abs(t(a.$name))+"."+o.name.replace(/-/g,"_"),o.$set("ngModel",u),n(i,null,9999)(r))}}}]}var i=e.module("ng.django.forms",[]),o=["input","select","textarea","datalist"];e.forEach(o,function(e){i.directive(e,r())}),i.directive("djngError",function(){return{restrict:"A",require:"?^form",link:function(n,t,r,i){var o,a=e.isElement(t)?t[0]:null;a&&i&&!e.isUndefined(r.name)&&"bound-field"===r.djngError&&(o=i[r.name],o.$setValidity("bound",!1),o.$parsers.push(function(e){return e!==a.defaultValue&&(o.$setValidity("bound",!0),t.removeAttr("djng-error")),e}))}}}),i.directive("ngModel",["$log",function(n){function t(e,n){switch(n.type){case"radio":n.defaultChecked&&e.$setViewValue(n.defaultValue);break;case"checkbox":n.defaultChecked&&e.$setViewValue(!0);break;case"password":e.$setViewValue(null);break;default:n.defaultValue&&e.$setViewValue(n.defaultValue)}}function r(n,t){var r=[];e.forEach(t.options,function(i){i.defaultSelected&&(e.element(i).prop("selected","selected"),t.multiple?r.push(i.value):n.$setViewValue(i.value))}),t.multiple&&n.$setViewValue(r)}function i(e,n){n.defaultValue&&e.$setViewValue(n.defaultValue)}return{restrict:"A",priority:1,require:["ngModel","^?form"],link:function(o,a,u,c){var s=e.isElement(a)?a[0]:null,l=c[0],d=c[1]||null;if(s&&d){switch(s.tagName){case"INPUT":t(l,s);break;case"SELECT":r(l,s);break;case"TEXTAREA":i(l,s);break;default:n.log("Unknown field type")}d.$setPristine()}}}}]),i.directive("validateMultipleFields",function(){return{restrict:"A",require:"^?form",link:function(n,t,r,i){function o(t){var r=!1;e.forEach(u,function(e){r=r||e.checked}),i.$setValidity("required",r),t&&(i.$dirty=!0,i.$pristine=!1,n.$apply())}var a,u=[];if(i){try{a=e.fromJson(r.validateMultipleFields)}catch(n){if(!e.isString(r.validateMultipleFields))return;a=[r.validateMultipleFields],i=i[a]}e.forEach(t.find("input"),function(n){a.indexOf(n.name)>=0&&(u.push(n),e.element(n).on("change",o))}),t.on("$destroy",function(){e.forEach(t.find("input"),function(n){e.element(n).off("change")})}),o()}}}}),i.directive("validateDate",function(){function e(e){var n,r;return!e||(r=new Date(e),!isNaN(r)&&(!t||(n=t.exec(e),n&&parseInt(n[2],10)===r.getMonth()+1)))}var t=null;return{require:"?ngModel",restrict:"A",link:function(r,i,o,a){if(a){o.validateDate&&(t=new RegExp(o.validateDate,"i"));var u=function(t){var r=a.$isEmpty(t)||e(t);return a.$setValidity("date",r),r?t:n};a.$parsers.push(u)}}}}),i.factory("djangoForm",function(){function n(e){for(var n in e)if(e.hasOwnProperty(n))return!0;return!1}function t(e){var n=e.$viewChangeListeners.push(e.clearRejected=function(){e.$message="",e.$setValidity("rejected",!0),e.$viewChangeListeners.splice(n-1,1),delete e.clearRejected})}function r(n){return e.isArray(n.$viewChangeListeners)}var i="__all__";return{setErrors:function(o,a){if(o.$message="",o.$error.hasOwnProperty("rejected")&&e.isArray(o.$error.rejected)){var u=o.$error.rejected.concat();e.forEach(u,function(n){var t,i=n.$name;o.hasOwnProperty(i)&&(t=o[i],r(t)&&t.clearRejected?t.clearRejected():(t.$message="",e.forEach(t,function(e,n){e&&r(e)&&e.clearRejected&&e.clearRejected()})))})}return e.forEach(a,function(n,a){var u;n.length>0&&(a===i?(o.$message=n[0],o.$setPristine()):o.hasOwnProperty(a)&&(u=o[a],u.$message=n[0],u.$setValidity("rejected",!1),u.$setPristine(),r(u)?t(u):e.forEach(u,function(e,n){e&&r(e)&&t(e)})))}),n(a)}}}),i.directive("djngBindIf",function(){return{restrict:"A",compile:function(e){return e.addClass("ng-binding"),function(e,t,r){t.data("$binding",r.ngBind),e.$watch(r.djngBindIf,function(e){e!==n&&null!==e&&t.text(e)})}}}})}(window.angular),function(e,n){"use strict";var t=e.module("ng.django.rmi",[]);t.provider("djangoRMI",function(){function t(r){e.forEach(r,function(o,a){if(!e.isObject(o))throw new Error("djangoRMI.configure got invalid data");o.hasOwnProperty("url")?(o.headers["X-Requested-With"]="XMLHttpRequest",r[a]=function(t){var r=e.copy(o);if("POST"===r.method){if(t===n)throw new Error("Calling remote method "+a+" without data object");r.data=t}else"auto"===r.method&&(t===n?r.method="GET":(r.method="POST",r.data=t));return i(r)}):t(o)})}var r,i;this.configure=function(e){r=e,t(r)},this.$get=["$http",function(e){return i=e,r}]})}(window.angular),function(e,n){"use strict";var t=e.module("ng.django.urls",[]);t.provider("djangoUrl",function(){var e="/angular/reverse/";this.setReverseUrl=function(n){e=n},this.$get=function(){return new r(e)}});var r=function(t){function r(e,n,t){for(var r=i(e),o=0;o<r.length;o++)n.call(t,e[r[o]],r[o]);return r}function i(e){var n=[];for(var t in e)e.hasOwnProperty(t)&&n.push(t);return n.sort()}function o(t,i){if(!i)return t;var o=[];return r(i,function(t,r){null!==t&&t!==n&&(e.isObject(t)&&(t=e.toJson(t)),o.push(encodeURIComponent(r)+"="+encodeURIComponent(t)))}),t+(t.indexOf("?")===-1?"?":"&")+o.join("&")}this.reverse=function(n,i){var a=o(t,{djng_url_name:n});if(Array.isArray(i))return r(i,function(e){a=o(a,{djng_url_args:e})}),a;var u={};return r(i,function(e,n){u["djng_url_kwarg_"+n]=e}),e.equals(u,{})?a:o(a,u)}}}(window.angular),function(e,n){"use strict";function t(){}var r=e.module("ng.django.websocket",[]);r.service("$websocket",function(){var e;this.connect=function(n){e=new WebSocket(n),e.onopen=this.onopen,e.onmessage=this.onmessage,e.onerror=this.onerror,e.onclose=this.onclose},this.send=function(n){e.send(n)},this.close=function(){e.close()}}),r.provider("djangoWebsocket",function(){var n,r={log:t,warn:t,error:t},i=null,o=e.injector(["ng"]).get("$log");this.setURI=function(e){return n=e,this},this.setHeartbeat=function(e){return i=e,this},this.setLogLevel=function(e){switch(e){case"debug":r=o;break;case"log":r.log=o.log;case"warn":r.warn=o.warn;case"error":r.error=o.error}return this},this.$get=["$websocket","$q","$timeout","$interval",function(t,o,a,u){function c(){r.log("Connecting to "+v),h=o.defer(),t.connect(v)}function s(){try{if(E++,E>3)throw new Error("Too many missed heartbeats.");t.send(i)}catch(e){u.cancel(y),y=null,r.warn("Closing connection. Reason: "+e.message),t.close()}}function l(n,r){j||e.equals(r,n)||t.send(e.toJson(n))}function d(n){e.forEach(n,function(e){"subscribe"===e.substring(0,9)?p=!0:"publish"===e.substring(0,7)&&(w=!0)})}function f(){m.$watchCollection($,l)}function g(e,t){var r=[n,e,"?"];r.push(t.join("&")),v=r.join("")}var v,h,m,$,p=!1,w=!1,j=!1,b=0,y=null,E=0;return t.onopen=function(e){r.log("Connected"),h.resolve(),b=0,i&&null===y&&(E=0,y=u(s,5e3))},t.onclose=function(e){r.log("Disconnected"),h.reject(),b=Math.min(b+1e3,1e4),a(function(){t.connect(v)},b)},t.onerror=function(e){r.error("Websocket connection is broken!"),t.close()},t.onmessage=function(n){var t;if(n.data===i)return void(E=0);try{t=e.fromJson(n.data)}catch(e){return void r.warn("Data received by server is invalid JSON: "+n.data)}p&&(j=!0,m.$apply(function(){e.extend(m[$],t)}),j=!1)},{connect:function(e,n,t,r){return m=e,d(r),$=n,m[$]=m[$]||{},g(t,r),c(),w&&h.promise.then(f),h.promise}}}]})}(window.angular);

!function(){"use strict";var e=angular.module("articleApp",["ng.django.urls"]);e.run(function(){}),e.config(["$interpolateProvider","$httpProvider",function(e,t){e.startSymbol("{[{"),e.endSymbol("}]}"),t.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",t.defaults.headers.delete={"Content-Type":"application/json"},t.defaults.xsrfCookieName="csrftoken",t.defaults.xsrfHeaderName="X-CSRFToken"}])}();

!function(){"use strict";var r=angular.module("articleApp");r.controller("articleController",["$scope","$rootScope","subscribeService",function(r,e,s){var i=this;i.errorInfo="",i.error=!1,i.success=!1,i.init=function(r){i.is_subscribed="True"===r},i.subscribe=function(){var r={is_article_subscribed:!i.is_subscribed};s.subscribe(r).then(function(r){i.success=!0,i.error=!1,i.email=r.email,i.is_subscribed=r.is_subscribed},function(r){i.success=!1,i.error=!0,404===r&&(i.errorInfo="Please log in first")})}}]),r.factory("subscribeService",["$http","$q","djangoUrl",function(r,e,s){var i={};return i.subscribe=function(i){var c=e.defer();return r({method:"POST",url:s.reverse("subscriptions"),data:i}).success(function(r){c.resolve(r)}).error(function(r,e){c.reject(e)}),c.promise},i}])}();

jQuery(document).ready(function(t){function e(t){var e="block"===window.getComputedStyle(t).display,a=t.textContent;try{t.classList.add("katex-rendered"),katex.render(a,t,{displayMode:e})}catch(i){t.textContent="\\"+(e?"[":"(")+a+"\\"+(e?"]":")"),MathJax.Hub.Queue(["Typeset",MathJax.Hub,t])}}t(".block-markdown").html(function(t,e){return e=e.replace(/\$\$((.|\s)*?)\$\$/g,"<math>$1</math>")}),t("math").replaceWith(function(){return t(this).html()}),t("script[type='math/tex; mode=display']").replaceWith(function(){var e=t(this).text(),a="\n"==e[0];return a?'<p class="maths">'+e+"</p>":'<span class="maths">'+e+"</span>"}),t(".toc").prepend("<div><h2>Quick Navigation</h2></div>"),Array.prototype.slice.call(document.querySelectorAll(".maths")).forEach(function(t){e(t)}),t(".container img").each(function(){imageSrc=t(this).attr("src"),imageExt=imageSrc.split(".").pop(),"gif"===imageExt&&t(this).attr("data-gifffer",imageSrc)}),Gifffer()});
