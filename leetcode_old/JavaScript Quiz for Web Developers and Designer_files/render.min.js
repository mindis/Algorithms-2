!function e(t,n,i){function r(o,s){var l,c;if(!n[o]){if(!t[o]){if(l="function"==typeof require&&require,!s&&l)return l(o,!0);if(a)return a(o,!0);throw Error("Cannot find module '"+o+"'")}c=n[o]={exports:{}},t[o][0].call(c.exports,function(e){var n=t[o][1][e];return r(n?n:e)},c,c.exports,e,t,n,i)}return n[o].exports}var o,a="function"==typeof require&&require;for(o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t,n){var i=function(t,n,i){function r(e,t){var n;document.createEvent?(n=document.createEvent("HTMLEvents"),n.initEvent(t,!0,!0)):(n=document.createEventObject(),n.eventType=t),n.eventName=t,document.createEvent&&e.dispatchEvent(n)}function o(){s(window,"message",a),this.eventListenerInitiated=!0}function a(e){var t,n;if(e.data){if(t=(""+e.data).split(";"),t.length<5)return;n={containerId:t[0],spotId:t[1],bannerId:t[2],type:t[3],data:t[4],source:e.target},n.containerId==m.id&&r(m.firstChild.children[n.spotId],n.type)}}function s(e,t,n){e==window&&"load"==t&&"complete"==document.readyState?n(null):e!=document||"ready"!=t||"interactive"!=document.readyState&&"complete"!=document.readyState?e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n):n(null)}function l(){var e,n,i,r=m.firstChild,o=!1,a=m.offsetWidth/parseInt(t.ad.spots[0].size.width,10),s=f(t.ad.size.width)/f(t.ad.size.height);if(t.$vars.$scale=a||1,e=t.ad.type.dependencies,e.length>1)for(n=1;n<e.length;n++)i=e[n],i.func&&this[i.func+"Resize"]&&this[i.func+"Resize"](m,t,a)&&(o=!0);o||(b.supportsHtml5()&&(b.setVendorStyle(r,"transform","scale("+a+")translate3d(0,0,0)"),b.setVendorStyle(r,"transformOrigin","0 0")),r.style.width=m.offsetWidth+"px",r.style.height=r.parentNode.offsetWidth/s+"px",m.style.height=r.style.height=m.offsetWidth/s+"px")}function c(e,t,n){o(),r(n,"loaded"),t.politeloading&&(e.politeLoading="off"!=t.politeloading),t.targeturl&&(e.targetUrl=t.targeturl),t.targetwindow&&(e.targetWindow=t.targetwindow),t.display&&(e.displayType=t.display),t.responsive&&(e.responsive="on"==t.responsive),m=u(e.ad.size,n),e.responsive&&(s(window,"load",function(){s(window,"resize",l)}),s(m,"resize",l)),e.targetUrl&&e.targetUrl.length>0&&(0===e.targetUrl.toLowerCase().indexOf("www")&&(e.targetUrl="http://"+e.targetUrl),"="==e.targetUrl.substring(e.targetUrl.length-1)&&(e.targetUrl+="[target_url_esc]"),"%3D"==e.targetUrl.substring(e.targetUrl.length-3)&&(e.targetUrl+="[target_url_esc_esc]")),"animated"!=e.displayType||b.supportsHtml5()||(e.displayType="image"),/firefox/i.test(navigator.userAgent)&&(e.politeLoading=!1),g()||(e.ad.type.$unsupported=!0),e.$bannersToDisplay=p(e,t.localization),"true"!=e.ad.type.settings.renderOnlyContainer&&d(e.$bannersToDisplay,e,m.firstChild);e.ad.type.settings.stopRender||b.trackImpression(e,t),r(n,"rendered"),e.$it=Date.now()}function d(e,t,i){function o(){var e=h.length;v&&"animated"==y&&e++,w==e&&(v&&r(i,"politedone"),r(i,"bannersloaded"))}function a(){var r,a,s=v&&"animated"==y?0:1;for(r=s;r<h.length;r++)a=b.createIframe(t,t.ad.spots[r],e[r],t.displayType,n),a.style.opacity=0,i.children[r].appendChild(a),a.onload=function(){var e,t;w++,this.onload=null,e=parseInt(this["data-index"]||0,10),i.children[e].firstChild&&0===e&&(t=i.children[e].firstChild,t.style.zIndex="1",t.style.opacity=0,setTimeout(function(){t.style.display="none"},300)),this.style.opacity="1",o()}}var c,d,p,u,g,h=[],m=t.ad.type.$unsupported?1:e.length,v=t.politeLoading,y=t.displayType,w=0;for(c=0;m>c;c++)d=e[c],p=t.ad.spots[c],u=document.createElement("div"),u.style.width=t.responsive&&!b.supportsHtml5()?f(p.size.width)/f(t.ad.size.width)*100+"%":p.size.width,u.style.height=t.responsive&&!b.supportsHtml5()?f(p.size.height)/f(t.ad.size.height)*100+"%":p.size.height,0===c?(g="image"==y||v&&"animated"==y?b.createIframe(t,p,d,"image",n):b.createIframe(t,p,d,"animated",n),s(g,"load",function(){w++,g.style.opacity=1,o()}),g.style.transition="opacity 0.2s",g.style.opacity=0,u.appendChild(g)):(u.style.display="none",u.style.position="absolute",u.style.top="0",u.style.left="0"),h.push(u),i.appendChild(u);return v?s(window,"load",a):a(),t.responsive&&l(),h}function p(e,t){var n,i,r,o,a,s,l,c,d,p,u,g,f=[];for(n=0;n<e.ad.spots.length;n++){switch(i=e.ad.spots[n],i.type){case"regular":o=i.selections[0];break;case"ab-test":for(a=Math.random(),s=0,l=0;l<i.selections.length;l++)if(s+=i.selections[l].weight,s>=a){o=i.selections[l];break}break;default:console.log("Incorrect ad type: "+i.id+" - "+i.type.name)}if(o){if(c=o.banners,c.length>1)if(null==o.localization){for(d=t?t.substr(0,2):(navigator.userLanguage?navigator.userLanguage.toLowerCase():window.navigator.language?window.navigator.language.toLowerCase():e.brand.defaultLocalization).substr(0,2),p=0;p<c.length;p++)for(u=c[p],g=u.localization.split(","),l=0;l<g.length;l++){if(g[l].split("-")[0]==d){r=u;break}g[l]!=e.brand.defaultLocalization||r||(r=u)}r||(r=c[0])}else for(p=0;p<c.length;p++){if(u=c[p],i.localization.indexOf(u.localization)>-1){r=u;break}u.localization!=e.brand.defaultLocalization||r||(r=u)}else 1==c.length?r=c[0]:console.log("No banner available in selection for spot: "+i.id);r?f.push(r):console.log("No banner was selected/found for spot: "+i.id),e.ad.spots[n].selectedBanner=r}}return f}function u(e,n){var i,r,o=y.container||t.container,a=document.createElement("div");return a.id="bf"+(new Date).getTime(),a.style.width=t.responsive?"100%":e.width,a.style.height=t.responsive?"100%":e.height,a.style.overflow="hidden",a.style.position="relative",o||!v?o?(i=document.getElementById(o),i&&(i.innerHTML="",i.appendChild(a))):document.body.appendChild(a):t.ad.type.settings.stopRender||n.parentNode.insertBefore(a,n.nextSibling),r=document.createElement("div"),a.appendChild(r),a}function g(){var e,n,i=t.ad.type.dependencies;if(i.length>1)for(e=1;e<i.length;e++)if(n=i[e],n.func&&this[n.func+"Compatible"]&&!this[n.func+"Compatible"](t))return!1;return!0}function f(e){return e.replace(/\D/g,"")}var h,m,v,y,w=0===i.src.indexOf("http")?i.src.split("/")[0]:"",b=e("./utils/BFUtils")(w);window.BFUtils||(window.BFUtils=b),t.$vars=t.$vars||{};try{t.account&&"mr-green"==t.account.id&&myFT&&(h=document.getElementById("banner"),h&&(h.style.opacity="0",h.style.background="#fff"))}catch(x){}return v=!0,y=b.urlParametersToJson(i.src),i.parentNode&&"HEAD"!=i.parentNode.nodeName?c(t,n,i):s(document,"ready",function(){v=!1,c(t,n,i)}),m};window.BannerFlowRender=i},{"./utils/BFUtils":2}],2:[function(e,t,n){t.exports=function(t){var n=e("./device"),i=e("./event"),r=e("./style"),o=e("./tracking")(t),a=e("./macro"),s=e("./json"),l=e("./banners")(t);return{isMobile:n.isMobile,isTouchDevice:n.isTouchDevice,supportsHtml5:n.supportsHtml5,bindEvent:i.bindEvent,unbindEvent:i.unbindEvent,dispatchEvent:i.dispatchEvent,prefixes:r.prefixes,setVendorStyle:r.setVendorStyle,protocol:t,trackingData:o.trackingData,getImpressionPixelUrl:o.getImpressionPixelUrl,loadPixel:o.loadPixel,getClickPixelUrl:o.getClickPixelUrl,trackImpression:o.trackImpression,click:o.click,isInView:o.isInView,viewGrade:o.viewGrade,getTrackingData:o.getTrackingData,queueTrackingEvent:o.queueTrackingEvent,sendTrackingData:o.sendTrackingData,fixUrl:o.fixUrl,resolveMacros:a.resolveMacros,getMacros:a.getMacros,toJsonString:s.toJsonString,urlParametersToJson:s.urlParametersToJson,createIframe:l.createIframe,setElementSize:l.setElementSize,getCustomParameters:l.getCustomParameters}}},{"./banners":3,"./device":4,"./event":5,"./json":6,"./macro":7,"./style":8,"./tracking":9}],3:[function(e,t,n){t.exports=function(t){var n,i;return t||(t=location.protocol),n=e("./device"),i=e("./tracking")(t),{createIframe:function(e,n,r,o,a){var s=document.createElement("iframe"),l="image"==o?r.srcImage:r.srcAnimated,c=i.getClickPixelUrl(e,r,n),d=(l.indexOf("?")>-1?"&":"?")+"clickpixel="+encodeURIComponent(c)+(e.targetUrl?"&targeturl="+encodeURIComponent(e.targetUrl):"")+"&targetwindow="+e.targetWindow+this.getCustomParameters(a);return s.src=(0===l.indexOf("http")||0===l.indexOf("/api")?"":t)+l+d,s.className="bf_"+o,this.setElementSize(s,e,n),s.style.backgroundColor=a["background-color"]?a["background-color"]:"transparent",s.frameBorder=0,s.allowtransparency="true",s.style.border="none",s.scrolling="no",s["data-index"]=n.index,s},setElementSize:function(e,t,i){e.setAttribute("style","max-width: none !important;max-height: none !important;"),e.style.width=t.responsive&&!n.supportsHtml5()?"100%":i.size.width,e.style.height=t.responsive&&!n.supportsHtml5()?"100%":i.size.height,e.style.position="absolute",e.style.top=e.style.left="0"},getCustomParameters:function(e){var t,n=",targetwindow,targeturl,display,responsive,politeloading,",i="";for(t in e)-1==n.indexOf(","+t+",")&&(i+="&"+t+"="+e[t]);return i}}}},{"./device":4,"./tracking":9}],4:[function(e,t,n){t.exports={isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},isTouchDevice:function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch?!0:!1},supportsHtml5:function(){var e,t,n,i,r,o,a,s,l;if(navigator.userAgent.indexOf("Android")>-1){if(e=+navigator.userAgent.match(/Android\s(.*?);/i)[1].split(".").slice(0,2).join("."),4.1>e)return!1;if(navigator.userAgent.indexOf("Firefox")>-1)return!1}if(t=function(){for(var e,t=3,n=document.createElement("div"),i=n.getElementsByTagName("i");n.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->",i[0];);return t>4?t:e}(),t&&10>t)return!1;if(navigator.appVersion)try{if(n=navigator.appVersion.split("/"),i=n[n.length-2],i.indexOf("Safari")>-1&&+i.split(".")[0]<=5)return!1}catch(c){}if(r=document.body||document.documentElement,o=r.style,a="transition","string"==typeof o[a])return!0;for(s=["Moz","webkit","Webkit","Khtml","O","ms"],a=a.charAt(0).toUpperCase()+a.substr(1),l=0;l<s.length;l++)if("string"==typeof o[s[l]+a])return!0;return!1}}},{}],5:[function(e,t,n){t.exports={bindEvent:function(e,t,n,i){e==window&&"load"==t&&"complete"==document.readyState?n(null):e.addEventListener?e.addEventListener(t,n,i):e.attachEvent&&e.attachEvent("on"+t,n)},debounce:function(e,t,n){var i,r,o,a,s,l;if("function"!=typeof e)throw"A function has to be provided to be able to debounce!";return l=function(){var c=Date.now()-a;t>c&&c>=0?i=setTimeout(l,t-c):(i=null,n||(s=e.apply(o,r),i||(o=r=null)))},function(){o=this,r=arguments,a=Date.now();var c=n&&!i;return i||(i=setTimeout(l,t)),c&&(s=e.apply(o,r),o=r=null),s}},unbindEvent:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n):e.detachEvent&&e.detachEvent("on"+t,n)},dispatchEvent:function(e,t,n){var i,r,o,a;try{i=new Event(e)}catch(s){i=document.createEvent("Event"),i.initEvent(e,!0,!1)}if(i.data=t,n&&document.createEvent)n.dispatchEvent(i);else if(vars._listeners[i.type]instanceof Array)for(r=vars._listeners[i.type],o=0,a=r.length;a>o;o++)r[o].call(vars,i,t)}}},{}],6:[function(e,t,n){t.exports={toJsonString:function(e){var t,n,i,r,o;try{return JSON.stringify(e)}catch(a){if(t=typeof e,"object"!=t||null===e)return"string"==t&&(e='"'+e+'"'),e+"";r=[],o=e&&e.constructor==Array;for(n in e)i=e[n],t=typeof i,"string"==t?i='"'+i+'"':"object"==t&&null!==i&&(i=JSON.stringify(i)),r.push((o?"":'"'+n+'":')+(i+""));return(o?"[":"{")+(r+"")+(o?"]":"}")}},urlParametersToJson:function(e){var t,n,i=e.indexOf("?")>-1?e.split("?")[1]:e,r=i.split("&"),o={};for(t=0;t<r.length;t++)n=r[t].split("="),o[n[0]]=n[1];return o}}},{}],7:[function(e,t,n){t.exports={resolveMacros:function(e,t){var n,i,r,o=["_double-escaped%","_escaped%","%"];for(e=e.replace("%random%",(new Date).getTime()),n=0;n<o.length;n++)for(i in t)r=t[i],0===n?r=encodeURIComponent(encodeURIComponent(r)):1===n&&(r=encodeURIComponent(r)),e=e.replace(RegExp("%"+i+o[n],"gi"),r);return e},getMacros:function(e){var t,n={};for(t in e)n["parameter_"+t]=e[t];return n}}},{}],8:[function(e,t,n){t.exports={prefixes:["webkit","moz","ms","o"],setVendorStyle:function(e,t,n,i){var r,o=t.charAt(0).toUpperCase()+t.slice(1);for(r=0;r<this.prefixes.length;r++)e.style[this.prefixes[r]+o]=i?"-"+this.prefixes[r]+"-"+n:n;e.style[t]=n}}},{}],9:[function(e,t,n){t.exports=function(t){var n=e("./json"),i=e("./macro");return{trackingData:function(e,t){var n,i=[],r=[];for(n=0;n<t.length;n++)i.push(t[n].id),r.push(t[n].bannerset);return{account:e.account.id,brand:e.brand.id,placement:e.id,ad:e.ad.id,bannerset:r.join(),banner:i.join(),cb:(new Date).getMilliseconds()}},getImpressionPixelUrl:function(e,i){if(!e.bftracking.preview){var r=this.trackingData(e,i);return t+e.bftracking.url+encodeURIComponent(n.toJsonString(r))}},loadPixel:function(e){if(!location||!(location.hostname.indexOf("www.bannerflow.")>-1||location.hostname.indexOf("app.bannerflow.")>-1)){var t=new Image;t.src=e}},getClickPixelUrl:function(e,t,i){var r,o;return e.bftracking.preview?"":(r=this.trackingData(e,[t]),r.spotIndexes=i.index,r.bannerIds=t.id,o=encodeURIComponent(n.toJsonString(r)),e.bftracking.clickUrl+o)},trackImpression:function(e,n){var r,o,a;e.bftracking&&e.bftracking.preview||(this.loadPixel(this.getImpressionPixelUrl(e,[e.$bannersToDisplay[0]],t)),n.impressionpixel&&(r=decodeURIComponent(n.impressionpixel),r=r+(r.indexOf("?")>-1?"&":"?")+"cb="+(new Date).getTime(),this.loadPixel(r)),n.impressionscript&&(o=document.createElement("script"),o.type="text/javascript",o.async=!0,o.src=decodeURIComponent(n.impressionscript),a=document.getElementsByTagName("script"),a.length>0&&a[0].parentNode.insertBefore(o,a[0])),e.network&&e.network.tag.patternImpressionPixel&&this.loadPixel(t+i.resolveMacros(e.network.tag.patternImpressionPixel,i.getMacros(n))))},fixUrl:function(e){return e?(0===e.indexOf("//")?e=this.protocol+e:0!==e.indexOf("http")&&(e="http://"+e),e):""},click:function(e,t,n){var i,r,o,a,s,l;n||(n=0),i=this.getClickPixelUrl(e,e.ad.spots[n].selectedBanner,e.ad.spots[n]),i&&e.bftracking&&!e.bftracking.preview&&this.loadPixel(i),t.clickpixel&&(r=new Image,r.src=decodeURIComponent(t.clickpixel)),t.clickscript&&(o=document.createElement("script"),o.type="text/javascript",o.async=!0,o.src=decodeURIComponent(t.clickscript),a=document.getElementsByTagName("script"),a.length>0&&a[0].parentNode.insertBefore(o,a[0])),s=this.fixUrl(e.ad.spots[n].selectedBanner.targeturl),l=this.fixUrl(e.targetUrl||s),l=l.replace(/\[target_url\]/gi,s).replace(/\[target_url_esc\]/gi,encodeURIComponent(s)).replace(/\[target_url_esc_esc\]/gi,encodeURIComponent(encodeURIComponent(s))),l&&window.open(l,e.targetWindow||"_blank")},isInView:function(e,t){return e.getBoundingClientRect?t?this.viewGrade(e)>0:this.viewGrade(e)>=1:!1},viewGrade:function(e){var t,n,i,r,o,a,s;return e.getBoundingClientRect?(t=e.getBoundingClientRect(),n=window.innerWidth||document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight,r=Math.min(t.width,Math.max(0,t.left+t.width))/t.width,o=Math.min(t.width,Math.max(0,n-t.left))/t.width,a=Math.min(t.height,Math.max(0,t.top+t.height))/t.height,s=Math.min(t.height,Math.max(0,i-t.top))/t.height,r*o*a*s):0},getTrackingData:function(e){var t,n;return e.$sid=e.$sid||Date.now()+"_"+Math.floor(1e3*Math.random()),t=e.$bannersToDisplay,n={u:{s:e.$sid,d:{r:window.screen.availHeigh+"x"+window.screen.availWidth},r:window.location!=window.parent.location?document.referrer:document.location.href},a:{a:e.account.id,br:e.brand.id,c:t&&t[0]?t[0].bannerset:0,ad:e.ad.id,p:e.id,b:t&&t[0]?t[0].id:0,pl:e.politeloading?1:0,r:e.responsive?1:0,an:"animated"==e.displayType?1:0}}},queueTrackingEvent:function(e,t,n,i){var r=this;e.$tq=e.$tq||[],e.$tq.push({t:t,v:n}),i?(e.$tto&&clearTimeout(e.$tto),e.$tto=null,r.sendTrackingData(e)):e.$tto||(e.$tto=setTimeout(function(){e.$tto=null,r.sendTrackingData(e)},2e3))},sendTrackingData:function(e){var t,i,r,o,a,s,l,c;if(!e.bftracking.preview){for(t=2e3,i=e.$tq,r=this.getTrackingData(e),o="http://requestb.in/1hlmmq21?data="+encodeURIComponent(n.toJsonString(r)),a=o.length;i.length;){for(s=i.length,l=i.slice(0,s),c=encodeURIComponent(n.toJsonString(l));a+c.length>t&&s>1;)s--,l=i.slice(0,s),c=encodeURIComponent(n.toJsonString(l));r.e=i.splice(0,s),this.loadPixel("http://requestb.in/1hlmmq21?data="+encodeURIComponent(n.toJsonString(r)))}e.$tq=[]}}}}},{"./json":6,"./macro":7}]},{},[1]);
//# sourceMappingURL=render.min.js.map
